package thread.communication;

import thread.communication.Bank.Person;

/**
 * 多线程并发安全
 * @author sunddenly
 *
 */
public class TestThreadSafe {
	public static void main(String[] args) {
		Bank bank = new Bank();
		/**
		 * 内部类的实例化方式
		 */
		Person p1 = bank.new Person();
		Person p2 = bank.new Person();
		p1.start();
		p2.start();
	}
}
class Bank{
	int count  = 10000;
	synchronized void getMoney(int money){
		if(count==0){
			throw new RuntimeException("余额为0");
		}
		try {
			Thread.sleep(1);
		} catch (InterruptedException e) {
			e.printStackTrace();
		}
		
		count-=money;
    }
	class Person extends Thread{
		public void run(){
			System.out.println("准备取钱等银行开门！");
			while(true){
				getMoney(100);
				System.out.println("当前余额："+count);
			}
		}
	}
}

